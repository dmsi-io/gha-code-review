name: 'Code Reviewer'
description: 'Reviews code in pull requests to ensure they meet standards not checkable with unit tests or linters'

inputs:
  token:
    required: true
    description: 'GitHub access token with repo permissions'
  changelog:
    required: false
    default: 'true'
    description: 'Whether to check the changelog for missing entries'
  todos:
    required: false
    default: 'true'
    description: 'Whether to check for TODOs in code that are resolved by the current PR'

runs:
  using: 'composite'
  steps:
    - name: Update Docs
      run: node ${{ github.action_path }}/bin/index.js
      shell: bash
      env:
        DMSI_CHECK_CHANGELOG: ${{ inputs.changelog }}
        DMSI_CHECK_TODOS: ${{ inputs.todos }}
        GHA_ACCESS_TOKEN: ${{ inputs.token }}
        REPO_NAME: ${{ github.repository }}
        REPO_OWNER: ${{ github.owner }}
        PULL_REQUEST: ${{ github.event.inputs.pullNumber || github.event.number }}
